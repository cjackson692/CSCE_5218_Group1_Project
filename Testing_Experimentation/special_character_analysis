import pandas as pd
import re
from collections import Counter

# Pull Data
with open("OpenSubtitles.en-tl.en", encoding="utf-8") as f_en:
    en_sentences = [line.strip() for line in f_en]

with open("OpenSubtitles.en-tl.tl", encoding="utf-8") as f_tl:
    tl_sentences = [line.strip() for line in f_tl]

# Combine all of the text from both files
text_dataset = "\n".join(en_sentences + tl_sentences)

# Retrieve the characters that are not part of the char ranges below
regex_search = re.compile(r"[^A-Za-z0-9À-ž\s]")
sc_list = regex_search.findall(text_dataset)

sc_count = Counter(sc_list)
distinct_sc = sorted(sc_count.keys())

# Analysis of special characters
print("Special characters in dataset:")
print(distinct_sc)
print("\nDistinct number of special characters:", len(distinct_sc), "\n")

print("Special character count:")
for sc, count in sc_count.most_common():
    print(f"{repr(sc)} : {count}")
